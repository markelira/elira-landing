/**
 * Update AI Copywriting Course data from FeaturedMasterclassSpotlight
 * For EMULATOR use only
 */

const admin = require('firebase-admin');

process.env.FIRESTORE_EMULATOR_HOST = '127.0.0.1:8080';

if (!admin.apps.length) {
  admin.initializeApp({ projectId: 'elira-landing-ce927' });
}

const db = admin.firestore();
const courseId = 'ai-copywriting-course';

async function updateCourseData() {
  console.log('üìù Updating AI Copywriting Course data...\n');

  const courseData = {
    title: 'Olvass a vev≈ëid gondolataiban',
    slug: 'ai-copywriting-course',
    shortDescription: 'Kutat√°s-alap√∫ kamp√°nyok, konkr√©t eredm√©nyek',
    description: '30 nap m√∫lva minden marketing sz√∂veged konkr√©t piackutat√°son fog alapulni, nem tal√°lgat√°son. Pontosan tudni fogod, milyen f√°jdalompontokat kell megsz√≥l√≠tanod, milyen nyelvet haszn√°lj, √©s hogyan √≠rj aj√°nlatokat, amik ut√°n a vev≈ëk jelentkeznek. M≈±k√∂d≈ë kamp√°nysablonokkal, amik a te term√©kedre vannak szabva - nem √°ltal√°nos elm√©letekkel.',

    // Instructor info
    instructorId: 'zoltan-somosi',
    instructorName: 'Somosi Zolt√°n',
    instructorEmail: 'zoltan@elira.hu',
    instructorBio: 'Marketing Specialista & Doktorandusz',
    instructorPhotoUrl: '/IMG_5730.JPG',

    // Category
    categoryId: 'ai-marketing',
    categoryName: 'AI Marketing',

    // Pricing
    price: 89990,
    currency: 'HUF',
    originalPrice: 89990,
    isFree: false,
    stripePriceId: 'price_1S0MvyHhqyKpFIBMQdiSPodM',

    // Course stats (these will be kept from existing data)
    totalModules: 5,
    totalLessons: 17,
    totalDuration: 3360, // 56 minutes total

    // Learning objectives from FeaturedMasterclassSpotlight
    objectives: [
      'Marketing anyagaid konkr√©t piackutat√°son alapulnak - nem tal√°lgat√°son vagy √©rz√©seken',
      'Landing oldalaid, email kamp√°nyaid √©s aj√°nlataid ugyanazt a vev≈ëi nyelvet besz√©lik',
      'Minden kamp√°nyodn√°l pontosan tudod: mit mondj, kinek, milyen sorrendben',
      'M√©rhet≈ë javul√°s: t√∂bb kattint√°s, t√∂bb jelentkez≈ë, t√∂bb v√°s√°rl√≥ - dokument√°ltan',
      'Saj√°t piac kutat√°s k√©sz: tudod pontosan ki a vev≈ëd √©s mit akar hallani',
      'M≈±k√∂d≈ë kamp√°nysablonok a te term√©keidre kit√∂ltve - nem √ºres form√°k'
    ],

    prerequisites: [
      'Alapvet≈ë sz√°m√≠t√≥g√©pes ismeretek',
      'Magyar nyelv magas szint≈± ismerete',
      'Nyitotts√°g az √∫j technol√≥gi√°k ir√°nt',
      'V√°llalkoz√≥i vagy marketinges h√°tt√©r el≈ëny'
    ],

    // Settings
    status: 'PUBLISHED',
    published: true,
    visibility: 'PUBLIC',
    language: 'hu',
    difficulty: 'INTERMEDIATE',
    certificateEnabled: true,
    enableDiscussion: true,
    enableQA: true,

    // Media
    thumbnailUrl: '/Cover_Olvass_a_vev≈ëid_gondolataiban-min.png',
    previewVideoUrl: 'https://player.mux.com/tTZjKcQAhn0233X1jBoj4UARa2nEKnEDRarPGZNUJ2Gg',

    // Analytics
    enrollmentCount: 312,
    completionCount: 0,
    averageRating: 4.9,
    totalReviews: 89,
    totalRevenue: 0,

    // Timestamps
    updatedAt: admin.firestore.FieldValue.serverTimestamp()
  };

  try {
    await db.collection('courses').doc(courseId).update(courseData);

    console.log('‚úÖ Course updated successfully!');
    console.log(`   Title: ${courseData.title}`);
    console.log(`   Description: ${courseData.shortDescription}`);
    console.log(`   Price: ${courseData.price.toLocaleString('hu-HU')} ${courseData.currency}`);
    console.log(`   Instructor: ${courseData.instructorName}`);
    console.log(`   Total Modules: ${courseData.totalModules}`);
    console.log(`   Total Lessons: ${courseData.totalLessons}\n`);

    process.exit(0);
  } catch (error) {
    console.error('‚ùå Error updating course:', error);
    process.exit(1);
  }
}

updateCourseData();
